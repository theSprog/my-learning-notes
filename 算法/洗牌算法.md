## 问题的引入

给定一个数组，设计一种算法。使得数组中每个元素都被均匀地打乱。



## 实现

```java
for(int i = n-1; i > 0; i--) {
    int to_idx = (int)(Math.random()*(i+1));	// 生成一个 [0, i] 之间的整数
    swap(arr[i], arr(to_idx));
}
```



## 原理

- 从后往前看，每次随机选择一个数和最后一个数交换。第一次选到 2 的概率是 $1/5$。换句话说将 2 放置到最后一位的概率时 $1/5$。

![image-20230223214226464](https://src-1259777572.cos.ap-chengdu.myqcloud.com/image-20230223214226464.png)

- 而接下来随机选择一个数和最后一个数交换，假设为 3。那么 3 放在倒数第二位的概率为 `(1/4) * (4/5)`，即首先第一次没被选中（$4/5$），然后第二次再被选中（即 $1/4$）。

![image-20230223214252539](https://src-1259777572.cos.ap-chengdu.myqcloud.com/image-20230223214252539.png)

- 依次类推，每一个元素被选定到某一位置的概率都是 $1/n$。其中 $n$ 是数组长度。